## Function oriented Programming

- 기존 객체 지향 프로그래밍에서 가지는 문제를 해결하는 대안으로 주목받는 패러다임

  - 객체 지향 프로그래밍의 문제점

    - 함수의 비일관성 : 객체의 맴버 변수가 변경될 경우 함수(method) 가 다른 결과를 반환할 수 있습니다.

    - 객체 내 상태 제어의 어려움 : 객체 간 상호작용을 위해서 다른 객체의 함수들을 호출하게 되고, 이는 자연스럽게 프로그램 복잡도를 증가시킵니다.

    - 객체 내 상태 제어의 어려움 : 외부에서 객체의 상태를 변경하는 메소드들이 호출되면, 언제 어디서 객체의 상태를 변경했는지 추적이 어렵습니다.

- 외부상태를 갖지 않는 함수들의 연속으로 프로그래밍을 하는 패러다임입니다.

  - 외부 상태를 갖지 않는다는 의미는, 같은 입력을 넣었을 때 언제나 같은 출력을 내보낸다는 것입니다.

  - 함수형 프로그래밍 코드에서는 한 번 초기화한 변수는 변하지 않습니다. 이런 특성을 불변성이라고 하는데, 이 불변성을 통해 안정성을 얻을 수 있습니다.

## 기본 개념

- Function oriented Programming : 함수가 외부상태를 갖지 않는다는 것이 중요!

- 순수 함수가 아닌 경우

```
c=1
def func(a: int, b: int) -> int:
    return a + b +c # c 라는 외부 값, 상태가 포함되어 있기에 함수형이 아닙니다.
```

- 순수 함수

```
def func(a: int, b: int, c: int) -> int:
    return a + b + c # 주어진 파라미터만 사용합니다. 별도의 상태가 없습니다.
```

- 외부상태를 가지지 않는 이유
  - 일반적으로 통제하지 못하는 외부 상태를 사용한다면 예측하지 못한 결과를 가질 수 있기 때문입니다.

```
class Calculator:
    def __init__(self, alpha: int) -> None:
        self.alpha = alpha
        self.beta = 0

    def run() -> int
        return self.alpha = self.beta

calculator = Calculator(alpha=3)
calculator.run() # 3 반환
calculator.beta = 1
calculator.run() # 4 반환
```

- 위의 코드처럼 상태는 어디서든 바뀔 가능성이 있음(side effect)

## 문제 해결 순서

- 1. 문제를 잘개 쪼갭니다.
- 2. 쪼개진 문제들 중 하나를 해결하는 순수 함수를 만듭니다.
- 3. 순수 함수들을 결합하여 문제들을 해결해 나갑니다.

- 보통 함수형 프로그래밍에서는 함수를 조합하는 방식으로 Pipelining, Partial Application, Currying

```
# Pipelining
def main():
    pipe_func = pipe(read_input_file, parse_input_data, save_data)
    return pipe_func("input_file.txt")

# Partial application
def power(base, exp) : # powering
    return base ** exp

def main():
    square = partial(power, exp=2)
    cube = partial(power, exp=3)
    square(2) # 2의 제곱인 4 반환
    cube(2) # 2의 세제곱인 8 반환
```

- 스칼라 언어가 있음

## 장단점

- 함수형 프로그래밍은 상태로 인한 side effect가 없기 때문에 안정적이빈다. 따라서 동시성을 가지는 프로그래밍에 사용하기 적합합니다. 특히 대용량 데이터를 병렬적으로 처리할 때 이렇게 side effect가 없도록 로직을 설계하는 것은 매우 중요한데, 최근 데이터 처리기술의 발전으로 함수형 프로그래밍이 부상되었습니다.

- 하지만 실제로 함수형 프로그래밍을 하기 위해선, 상태를 허용하지 않기에 기존 객체 지향과 같은 기능의 코드를 구현하려면 다양한 함수들을 조합하여 사용해야 합니다. 그리고 친숙하지 않은 설계 방식으로 인해 러닝 커브가 높습니다.

## 정리

- 프로그래밍 패러다임이란 프로그래밍을 어떤 기준으로 바라보고 작성할 것인지에 대한 관점이다.
- 절자치향 프로그래밍은 순차적인 함수 호출을 중심의 관점입니다.

  - 주로 구조가 Top -> Down 입니다. 따라서 이해하기 쉽습니다.
  - 하지만 코드를 확장하거나 자주 실행에 따라 로직잉 바뀌어야 하는 경우에 수정하기 어렵습니다.

- 객체 지향 프로그래밍은 객체들의 책임과 협력을 중심의 관점입니다.

  - 다향성과 의존성 주입으로 코드를 확장하기 쉬우며, 실행환경의 다양한 입력에 대응하기 좋습니다.
  - 하지만 런타임이 되기 전에 실제로 코드가 어떤 방향으로 흐르는지 알기 어려우며,, 디버깅도 어렵습니다.

- 함수형 프로그래밍은 상태를 갖지 않는 함수들의 활용 중심의 관점입니다.
  - 상태를 가지지 않기 때문에 예측에서 벗어나는 결과(side effect)가 없습니다.
  - 하지만 실제로 상태를 가지지 않는 함수를 작성하고 활용하는 코드를 작성하는 것은 어렵습니다.

## 참고 자료

- https://www.youtube.com/watch?v=dJ5C4qRqAgA

  - 객체 지향 내용에 대한 유튜브 영상

- http://ruaa.me/why-functional-matters/
  - 함수형 프로그래밍이 왜 좋은지 좀더 자세하게 설명한 글
